@(player: Player)

@import helper._

@main("Jeux") {
    
    
    <div class="container">
	    <div id="divLogo">
	    	<div>
		    	<h1>Jouer :@player.pseudo</h1>
		    	<p>Appuyez sur le bouton "Réponse" pour répondre.
		    	</p>
	    	</div>
	 	   <a id="reponse" class="btnPush" href="#">Réponse ! </a>
	    </div>	    
    </div>
    
     <script type="text/javascript" charset="utf-8">
    
        $(function() {
            var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket
	        var chatSocket = new WS("@routes.Application.websocketPlayer(player.pseudo).webSocketURL(request)")
            
            var sendMessage = function() {
                chatSocket.send(JSON.stringify({type:"response", data:"@player.pseudo"}));
                
            }
            var receiveEvent = function(event) {
            	var data = JSON.parse(event.data);
            	if (data.type ==="registerDone" && data.data === "@player.pseudo"){
            		$("#reponse").show();  
            	}
                
            }
            
            chatSocket.onmessage = receiveEvent;
            
            $("#reponse")[0].onclick = sendMessage;  
            $("#reponse").hide();  
            
        })
    
    </script>
    
    
}