@(players: List[Player])


@main("Jeux") {
    
    
    	 <div class="page-header">
	        <h1>Question 1 </h1>
	    </div>
	    <div class="row">
	    	<div class="center">
	    		<div id="divLogo">
			    	<img id="logo" src="@routes.Assets.at("images/logo_jeux.png")" class="img-rounded" width="400"/>
	    		</div>
	    	</div>
	    </div>
	     <div class="row">
		    <h2>Liste des joueurs inscrits</h2>
		    <ul id="playersList" class="nav nav-pills">
		        @for(player <- players) {
		            <li>
		            	<div class="playerShow">
			            	<div class="playerParent" id="@player.pseudo">
				            	<div class="player" >
					                <p >@player.pseudo</p>
					                <button class="btn btn success btnPlayers" id="btn@player.pseudo" onclick="clickBtnValider(this);">Valider ?</button>
				            	</div>
			            	</div>
			                <p >Compteur de points</p>
			                <p id="pt@player.pseudo">0</p>
		            	</div>
		            </li>
		        }
		    </ul>
		    
	    </div>
	        
    
    <script type="text/javascript" charset="utf-8">
    
    	function hideBtns(){
            $(".btnPlayers").each(function(btn){
            	$(this).hide();
            })
        }
    
	    function clickBtnValider(btn){
	    	$('#reponse').get(0).play();
	    	var id = btn.getAttribute("id").substring(3);
	    	var text = $('#pt'+id).text(); 
	    	var newScore = parseInt(text) + 1; 
	    	$('#pt'+id).replaceWith('<p id="pt'+id+'">'+newScore+'</p>');
        	hideBtns();
	    }
    
        $(function() {
            var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket
	        var chatSocket = new WS("@routes.Application.initWebSocketGame().webSocketURL(request)")
            
            
            var receiveEvent = function(event) {
            	var user = event.data;
            	$('#buzz').get(0).play();
            	
            	$('.playerParent').each(function(userDiv){
            		
            		if ($(this).attr("id") === user){
            			//$(this).addClass("playerAnswer");
            			$(this).removeClass().addClass("playerParent animated flash");
            			var el = $(this);
            			var wait = window.setTimeout( function(){
            				el.removeClass().addClass("playerParent");
            				$('#btn'+user).show();
            				},
            				1300
            			);
            		}else{
            			$(this).removeClass().addClass("playerParent");	
            		}
            	});
            	
            }
                     
            
            chatSocket.onmessage = receiveEvent;
            
            /* var hideBtns = function(){
	            $(".btnPlayers").each(function(btn){
	            	$(this).hide();
	            })
            }
            
            var clickBtnValider = function(btn){
            	$('#reponse').get(0).play();
            	hideBtns();
            } */
            
            hideBtns();
            
        });
        
        
    
    </script>
<!--

//-->
</script>
    
}